{
  "$schema": "https://tree-sitter.github.io/tree-sitter/assets/schemas/grammar.schema.json",
  "name": "amble",
  "word": "identifier",
  "rules": {
    "source_file": {
      "type": "REPEAT1",
      "content": {
        "type": "CHOICE",
        "members": [
          {
            "type": "SYMBOL",
            "name": "set_decl"
          },
          {
            "type": "SYMBOL",
            "name": "room_def"
          },
          {
            "type": "SYMBOL",
            "name": "item_def"
          },
          {
            "type": "SYMBOL",
            "name": "npc_def"
          },
          {
            "type": "SYMBOL",
            "name": "trigger_def"
          },
          {
            "type": "SYMBOL",
            "name": "spinner_def"
          },
          {
            "type": "SYMBOL",
            "name": "goal_def"
          }
        ]
      }
    },
    "comment": {
      "type": "TOKEN",
      "content": {
        "type": "SEQ",
        "members": [
          {
            "type": "STRING",
            "value": "#"
          },
          {
            "type": "PATTERN",
            "value": ".*"
          }
        ]
      }
    },
    "set_name": {
      "type": "ALIAS",
      "content": {
        "type": "SYMBOL",
        "name": "identifier"
      },
      "named": true,
      "value": "set_name"
    },
    "room_id": {
      "type": "ALIAS",
      "content": {
        "type": "SYMBOL",
        "name": "identifier"
      },
      "named": true,
      "value": "room_id"
    },
    "item_id": {
      "type": "ALIAS",
      "content": {
        "type": "SYMBOL",
        "name": "identifier"
      },
      "named": true,
      "value": "item_id"
    },
    "npc_id": {
      "type": "ALIAS",
      "content": {
        "type": "SYMBOL",
        "name": "identifier"
      },
      "named": true,
      "value": "npc_id"
    },
    "spinner_id": {
      "type": "ALIAS",
      "content": {
        "type": "SYMBOL",
        "name": "identifier"
      },
      "named": true,
      "value": "spinner_id"
    },
    "goal_id": {
      "type": "ALIAS",
      "content": {
        "type": "SYMBOL",
        "name": "identifier"
      },
      "named": true,
      "value": "goal_id"
    },
    "flag_name": {
      "type": "ALIAS",
      "content": {
        "type": "SYMBOL",
        "name": "identifier"
      },
      "named": true,
      "value": "flag_name"
    },
    "custom_state": {
      "type": "ALIAS",
      "content": {
        "type": "SYMBOL",
        "name": "identifier"
      },
      "named": true,
      "value": "custom_state"
    },
    "item_ability": {
      "type": "ALIAS",
      "content": {
        "type": "SYMBOL",
        "name": "identifier"
      },
      "named": true,
      "value": "item_ability"
    },
    "item_interaction": {
      "type": "ALIAS",
      "content": {
        "type": "SYMBOL",
        "name": "identifier"
      },
      "named": true,
      "value": "item_interaction"
    },
    "exit_dir": {
      "type": "ALIAS",
      "content": {
        "type": "CHOICE",
        "members": [
          {
            "type": "SYMBOL",
            "name": "identifier"
          },
          {
            "type": "SYMBOL",
            "name": "string"
          }
        ]
      },
      "named": true,
      "value": "exit_dir"
    },
    "entity_name": {
      "type": "ALIAS",
      "content": {
        "type": "SYMBOL",
        "name": "string"
      },
      "named": true,
      "value": "entity_name"
    },
    "entity_desc": {
      "type": "ALIAS",
      "content": {
        "type": "SYMBOL",
        "name": "string"
      },
      "named": true,
      "value": "entity_desc"
    },
    "_room_ref": {
      "type": "SYMBOL",
      "name": "room_id"
    },
    "_item_ref": {
      "type": "SYMBOL",
      "name": "item_id"
    },
    "_npc_ref": {
      "type": "SYMBOL",
      "name": "npc_id"
    },
    "_flag_ref": {
      "type": "SYMBOL",
      "name": "flag_name"
    },
    "_goal_ref": {
      "type": "SYMBOL",
      "name": "goal_id"
    },
    "_spinner_ref": {
      "type": "SYMBOL",
      "name": "spinner_id"
    },
    "_set_ref": {
      "type": "SYMBOL",
      "name": "set_name"
    },
    "identifier": {
      "type": "TOKEN",
      "content": {
        "type": "PREC",
        "value": -1,
        "content": {
          "type": "PATTERN",
          "value": "[a-zA-Z0-9_\\-:#]+"
        }
      }
    },
    "number": {
      "type": "PATTERN",
      "value": "-?\\d+"
    },
    "string": {
      "type": "CHOICE",
      "members": [
        {
          "type": "TOKEN",
          "content": {
            "type": "PATTERN",
            "value": "\\\"([^\\\"\\\\\\n]|\\\\.)*\\\""
          }
        },
        {
          "type": "TOKEN",
          "content": {
            "type": "PATTERN",
            "value": "'([^'\\\\\\n]|\\\\.)*'"
          }
        },
        {
          "type": "TOKEN",
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "STRING",
                "value": "\"\"\""
              },
              {
                "type": "REPEAT",
                "content": {
                  "type": "CHOICE",
                  "members": [
                    {
                      "type": "PATTERN",
                      "value": "[^\\\"]"
                    },
                    {
                      "type": "PATTERN",
                      "value": "\\\"[^\\\"]"
                    },
                    {
                      "type": "PATTERN",
                      "value": "\\\"\\\"[^\\\"]"
                    },
                    {
                      "type": "PATTERN",
                      "value": "\\\\."
                    }
                  ]
                }
              },
              {
                "type": "STRING",
                "value": "\"\"\""
              }
            ]
          }
        },
        {
          "type": "TOKEN",
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "STRING",
                "value": "'''"
              },
              {
                "type": "REPEAT",
                "content": {
                  "type": "CHOICE",
                  "members": [
                    {
                      "type": "PATTERN",
                      "value": "[^']"
                    },
                    {
                      "type": "PATTERN",
                      "value": "'[^']"
                    },
                    {
                      "type": "PATTERN",
                      "value": "''[^']"
                    },
                    {
                      "type": "PATTERN",
                      "value": "\\\\."
                    }
                  ]
                }
              },
              {
                "type": "STRING",
                "value": "'''"
              }
            ]
          }
        },
        {
          "type": "TOKEN",
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "STRING",
                "value": "r#\""
              },
              {
                "type": "REPEAT",
                "content": {
                  "type": "CHOICE",
                  "members": [
                    {
                      "type": "PATTERN",
                      "value": "[^\\\"]"
                    },
                    {
                      "type": "PATTERN",
                      "value": "\\\"[^#]"
                    }
                  ]
                }
              },
              {
                "type": "STRING",
                "value": "\"#"
              }
            ]
          }
        }
      ]
    },
    "boolean": {
      "type": "CHOICE",
      "members": [
        {
          "type": "STRING",
          "value": "true"
        },
        {
          "type": "STRING",
          "value": "false"
        }
      ]
    },
    "set_decl": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "let"
        },
        {
          "type": "STRING",
          "value": "set"
        },
        {
          "type": "FIELD",
          "name": "name",
          "content": {
            "type": "SYMBOL",
            "name": "set_name"
          }
        },
        {
          "type": "STRING",
          "value": "="
        },
        {
          "type": "FIELD",
          "name": "room_list",
          "content": {
            "type": "SYMBOL",
            "name": "set_list"
          }
        }
      ]
    },
    "set_list": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "("
        },
        {
          "type": "SEQ",
          "members": [
            {
              "type": "SYMBOL",
              "name": "_room_ref"
            },
            {
              "type": "REPEAT",
              "content": {
                "type": "SEQ",
                "members": [
                  {
                    "type": "STRING",
                    "value": ","
                  },
                  {
                    "type": "SYMBOL",
                    "name": "_room_ref"
                  }
                ]
              }
            }
          ]
        },
        {
          "type": "STRING",
          "value": ")"
        }
      ]
    },
    "room_def": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "room"
        },
        {
          "type": "FIELD",
          "name": "room_id",
          "content": {
            "type": "SYMBOL",
            "name": "room_id"
          }
        },
        {
          "type": "SYMBOL",
          "name": "room_block"
        }
      ]
    },
    "room_block": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "{"
        },
        {
          "type": "REPEAT",
          "content": {
            "type": "SYMBOL",
            "name": "_room_stmt"
          }
        },
        {
          "type": "STRING",
          "value": "}"
        }
      ]
    },
    "_room_stmt": {
      "type": "CHOICE",
      "members": [
        {
          "type": "SYMBOL",
          "name": "room_name"
        },
        {
          "type": "SYMBOL",
          "name": "room_desc"
        },
        {
          "type": "SYMBOL",
          "name": "room_visited"
        },
        {
          "type": "SYMBOL",
          "name": "room_exit"
        },
        {
          "type": "SYMBOL",
          "name": "ovl_flag_binary"
        },
        {
          "type": "SYMBOL",
          "name": "ovl_presence_pair"
        },
        {
          "type": "SYMBOL",
          "name": "ovl_npc_state_set"
        },
        {
          "type": "SYMBOL",
          "name": "overlay_stmt"
        }
      ]
    },
    "room_name": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "name"
        },
        {
          "type": "FIELD",
          "name": "name",
          "content": {
            "type": "SYMBOL",
            "name": "entity_name"
          }
        }
      ]
    },
    "room_desc": {
      "type": "SEQ",
      "members": [
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "STRING",
              "value": "desc"
            },
            {
              "type": "STRING",
              "value": "description"
            }
          ]
        },
        {
          "type": "FIELD",
          "name": "description",
          "content": {
            "type": "SYMBOL",
            "name": "entity_desc"
          }
        }
      ]
    },
    "room_visited": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "visited"
        },
        {
          "type": "FIELD",
          "name": "visited",
          "content": {
            "type": "ALIAS",
            "content": {
              "type": "SYMBOL",
              "name": "boolean"
            },
            "named": true,
            "value": "room_visited"
          }
        }
      ]
    },
    "room_exit": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "exit"
        },
        {
          "type": "FIELD",
          "name": "dir",
          "content": {
            "type": "SYMBOL",
            "name": "exit_dir"
          }
        },
        {
          "type": "STRING",
          "value": "->"
        },
        {
          "type": "FIELD",
          "name": "dest",
          "content": {
            "type": "SYMBOL",
            "name": "_room_ref"
          }
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "SYMBOL",
              "name": "exit_block"
            },
            {
              "type": "BLANK"
            }
          ]
        }
      ]
    },
    "exit_block": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "{"
        },
        {
          "type": "REPEAT1",
          "content": {
            "type": "SEQ",
            "members": [
              {
                "type": "SYMBOL",
                "name": "exit_stmt"
              },
              {
                "type": "CHOICE",
                "members": [
                  {
                    "type": "STRING",
                    "value": ","
                  },
                  {
                    "type": "BLANK"
                  }
                ]
              }
            ]
          }
        },
        {
          "type": "STRING",
          "value": "}"
        }
      ]
    },
    "exit_stmt": {
      "type": "CHOICE",
      "members": [
        {
          "type": "SYMBOL",
          "name": "required_items_stmt"
        },
        {
          "type": "SYMBOL",
          "name": "required_flags_stmt"
        },
        {
          "type": "SYMBOL",
          "name": "barred_stmt"
        },
        {
          "type": "STRING",
          "value": "hidden"
        },
        {
          "type": "STRING",
          "value": "locked"
        }
      ]
    },
    "required_items_stmt": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "required_items"
        },
        {
          "type": "STRING",
          "value": "("
        },
        {
          "type": "SEQ",
          "members": [
            {
              "type": "FIELD",
              "name": "item_id",
              "content": {
                "type": "SYMBOL",
                "name": "_item_ref"
              }
            },
            {
              "type": "REPEAT",
              "content": {
                "type": "SEQ",
                "members": [
                  {
                    "type": "STRING",
                    "value": ","
                  },
                  {
                    "type": "FIELD",
                    "name": "item_id",
                    "content": {
                      "type": "SYMBOL",
                      "name": "_item_ref"
                    }
                  }
                ]
              }
            }
          ]
        },
        {
          "type": "STRING",
          "value": ")"
        }
      ]
    },
    "required_flags_stmt": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "required_flags"
        },
        {
          "type": "STRING",
          "value": "("
        },
        {
          "type": "SEQ",
          "members": [
            {
              "type": "FIELD",
              "name": "flag_name",
              "content": {
                "type": "SYMBOL",
                "name": "_flag_ref"
              }
            },
            {
              "type": "REPEAT",
              "content": {
                "type": "SEQ",
                "members": [
                  {
                    "type": "STRING",
                    "value": ","
                  },
                  {
                    "type": "FIELD",
                    "name": "flag_name",
                    "content": {
                      "type": "SYMBOL",
                      "name": "_flag_ref"
                    }
                  }
                ]
              }
            }
          ]
        },
        {
          "type": "STRING",
          "value": ")"
        }
      ]
    },
    "barred_stmt": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "barred"
        },
        {
          "type": "FIELD",
          "name": "msg",
          "content": {
            "type": "ALIAS",
            "content": {
              "type": "SYMBOL",
              "name": "string"
            },
            "named": true,
            "value": "player_message"
          }
        }
      ]
    },
    "overlay_stmt": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "overlay"
        },
        {
          "type": "STRING",
          "value": "if"
        },
        {
          "type": "SYMBOL",
          "name": "_ovl_cond_list"
        },
        {
          "type": "SYMBOL",
          "name": "ovl_block"
        }
      ]
    },
    "ovl_block": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "{"
        },
        {
          "type": "SYMBOL",
          "name": "ovl_text_stmt"
        },
        {
          "type": "STRING",
          "value": "}"
        }
      ]
    },
    "ovl_text_stmt": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "text"
        },
        {
          "type": "FIELD",
          "name": "text",
          "content": {
            "type": "ALIAS",
            "content": {
              "type": "SYMBOL",
              "name": "string"
            },
            "named": true,
            "value": "ovl_text"
          }
        }
      ]
    },
    "_ovl_cond_list": {
      "type": "CHOICE",
      "members": [
        {
          "type": "SYMBOL",
          "name": "_ovl_cond"
        },
        {
          "type": "SEQ",
          "members": [
            {
              "type": "SYMBOL",
              "name": "_ovl_cond"
            },
            {
              "type": "REPEAT",
              "content": {
                "type": "SEQ",
                "members": [
                  {
                    "type": "STRING",
                    "value": ","
                  },
                  {
                    "type": "SYMBOL",
                    "name": "_ovl_cond"
                  }
                ]
              }
            }
          ]
        },
        {
          "type": "SEQ",
          "members": [
            {
              "type": "STRING",
              "value": "("
            },
            {
              "type": "SEQ",
              "members": [
                {
                  "type": "SYMBOL",
                  "name": "_ovl_cond"
                },
                {
                  "type": "REPEAT",
                  "content": {
                    "type": "SEQ",
                    "members": [
                      {
                        "type": "STRING",
                        "value": ","
                      },
                      {
                        "type": "SYMBOL",
                        "name": "_ovl_cond"
                      }
                    ]
                  }
                }
              ]
            },
            {
              "type": "STRING",
              "value": ")"
            }
          ]
        }
      ]
    },
    "_ovl_cond": {
      "type": "CHOICE",
      "members": [
        {
          "type": "SYMBOL",
          "name": "ovl_flag_status"
        },
        {
          "type": "SYMBOL",
          "name": "ovl_item_presence"
        },
        {
          "type": "SYMBOL",
          "name": "ovl_item_posession"
        },
        {
          "type": "SYMBOL",
          "name": "ovl_npc_presence"
        },
        {
          "type": "SYMBOL",
          "name": "ovl_npc_state"
        },
        {
          "type": "SYMBOL",
          "name": "ovl_item_in_room"
        }
      ]
    },
    "ovl_flag_status": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "flag"
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "STRING",
              "value": "set"
            },
            {
              "type": "STRING",
              "value": "unset"
            },
            {
              "type": "STRING",
              "value": "complete"
            }
          ]
        },
        {
          "type": "FIELD",
          "name": "flag_name",
          "content": {
            "type": "SYMBOL",
            "name": "_flag_ref"
          }
        }
      ]
    },
    "ovl_item_presence": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "item"
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "STRING",
              "value": "present"
            },
            {
              "type": "STRING",
              "value": "absent"
            }
          ]
        },
        {
          "type": "FIELD",
          "name": "item_id",
          "content": {
            "type": "SYMBOL",
            "name": "_item_ref"
          }
        }
      ]
    },
    "ovl_item_posession": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "player"
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "STRING",
              "value": "has"
            },
            {
              "type": "STRING",
              "value": "missing"
            }
          ]
        },
        {
          "type": "STRING",
          "value": "item"
        },
        {
          "type": "FIELD",
          "name": "item_id",
          "content": {
            "type": "SYMBOL",
            "name": "_item_ref"
          }
        }
      ]
    },
    "ovl_npc_presence": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "npc"
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "STRING",
              "value": "present"
            },
            {
              "type": "STRING",
              "value": "absent"
            }
          ]
        },
        {
          "type": "FIELD",
          "name": "npc_id",
          "content": {
            "type": "SYMBOL",
            "name": "_npc_ref"
          }
        }
      ]
    },
    "ovl_npc_state": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "npc"
        },
        {
          "type": "STRING",
          "value": "in"
        },
        {
          "type": "STRING",
          "value": "state"
        },
        {
          "type": "FIELD",
          "name": "npc_id",
          "content": {
            "type": "SYMBOL",
            "name": "_npc_ref"
          }
        },
        {
          "type": "FIELD",
          "name": "npc_state",
          "content": {
            "type": "SYMBOL",
            "name": "npc_state"
          }
        }
      ]
    },
    "npc_state": {
      "type": "CHOICE",
      "members": [
        {
          "type": "SYMBOL",
          "name": "npc_state_builtin"
        },
        {
          "type": "SYMBOL",
          "name": "npc_state_custom"
        }
      ]
    },
    "npc_state_builtin": {
      "type": "CHOICE",
      "members": [
        {
          "type": "STRING",
          "value": "normal"
        },
        {
          "type": "STRING",
          "value": "happy"
        },
        {
          "type": "STRING",
          "value": "bored"
        },
        {
          "type": "STRING",
          "value": "tired"
        },
        {
          "type": "STRING",
          "value": "sad"
        },
        {
          "type": "STRING",
          "value": "mad"
        }
      ]
    },
    "npc_state_custom": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "custom"
        },
        {
          "type": "FIELD",
          "name": "custom_state",
          "content": {
            "type": "SYMBOL",
            "name": "custom_state"
          }
        }
      ]
    },
    "ovl_item_in_room": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "item"
        },
        {
          "type": "STRING",
          "value": "in"
        },
        {
          "type": "STRING",
          "value": "room"
        },
        {
          "type": "FIELD",
          "name": "item_id",
          "content": {
            "type": "SYMBOL",
            "name": "_item_ref"
          }
        },
        {
          "type": "FIELD",
          "name": "room_id",
          "content": {
            "type": "SYMBOL",
            "name": "_room_ref"
          }
        }
      ]
    },
    "ovl_flag_binary": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "overlay"
        },
        {
          "type": "STRING",
          "value": "if"
        },
        {
          "type": "STRING",
          "value": "flag"
        },
        {
          "type": "FIELD",
          "name": "flag_name",
          "content": {
            "type": "SYMBOL",
            "name": "_flag_ref"
          }
        },
        {
          "type": "SYMBOL",
          "name": "flag_binary_block"
        }
      ]
    },
    "flag_binary_block": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "{"
        },
        {
          "type": "STRING",
          "value": "set"
        },
        {
          "type": "FIELD",
          "name": "set_text",
          "content": {
            "type": "ALIAS",
            "content": {
              "type": "SYMBOL",
              "name": "string"
            },
            "named": true,
            "value": "ovl_text"
          }
        },
        {
          "type": "STRING",
          "value": "unset"
        },
        {
          "type": "FIELD",
          "name": "unset_text",
          "content": {
            "type": "ALIAS",
            "content": {
              "type": "SYMBOL",
              "name": "string"
            },
            "named": true,
            "value": "ovl_text"
          }
        },
        {
          "type": "STRING",
          "value": "}"
        }
      ]
    },
    "ovl_presence_pair": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "overlay"
        },
        {
          "type": "STRING",
          "value": "if"
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "SEQ",
              "members": [
                {
                  "type": "STRING",
                  "value": "item"
                },
                {
                  "type": "FIELD",
                  "name": "item_id",
                  "content": {
                    "type": "SYMBOL",
                    "name": "_item_ref"
                  }
                }
              ]
            },
            {
              "type": "SEQ",
              "members": [
                {
                  "type": "STRING",
                  "value": "npc"
                },
                {
                  "type": "FIELD",
                  "name": "npc_id",
                  "content": {
                    "type": "SYMBOL",
                    "name": "_npc_ref"
                  }
                }
              ]
            }
          ]
        },
        {
          "type": "SYMBOL",
          "name": "presence_pair_block"
        }
      ]
    },
    "presence_pair_block": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "{"
        },
        {
          "type": "STRING",
          "value": "present"
        },
        {
          "type": "FIELD",
          "name": "present_text",
          "content": {
            "type": "ALIAS",
            "content": {
              "type": "SYMBOL",
              "name": "string"
            },
            "named": true,
            "value": "ovl_text"
          }
        },
        {
          "type": "STRING",
          "value": "absent"
        },
        {
          "type": "FIELD",
          "name": "absent_text",
          "content": {
            "type": "ALIAS",
            "content": {
              "type": "SYMBOL",
              "name": "string"
            },
            "named": true,
            "value": "ovl_text"
          }
        },
        {
          "type": "STRING",
          "value": "}"
        }
      ]
    },
    "ovl_npc_state_set": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "overlay"
        },
        {
          "type": "STRING",
          "value": "if"
        },
        {
          "type": "STRING",
          "value": "npc"
        },
        {
          "type": "FIELD",
          "name": "npc_id",
          "content": {
            "type": "SYMBOL",
            "name": "_npc_ref"
          }
        },
        {
          "type": "STRING",
          "value": "here"
        },
        {
          "type": "SYMBOL",
          "name": "npc_state_set_block"
        }
      ]
    },
    "npc_state_set_block": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "{"
        },
        {
          "type": "REPEAT1",
          "content": {
            "type": "SYMBOL",
            "name": "npc_state_set_line"
          }
        },
        {
          "type": "STRING",
          "value": "}"
        }
      ]
    },
    "npc_state_set_line": {
      "type": "SEQ",
      "members": [
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "SYMBOL",
              "name": "npc_state_builtin"
            },
            {
              "type": "SYMBOL",
              "name": "npc_state_set_custom"
            }
          ]
        },
        {
          "type": "FIELD",
          "name": "text",
          "content": {
            "type": "ALIAS",
            "content": {
              "type": "SYMBOL",
              "name": "string"
            },
            "named": true,
            "value": "ovl_text"
          }
        }
      ]
    },
    "npc_state_set_custom": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "custom"
        },
        {
          "type": "STRING",
          "value": "("
        },
        {
          "type": "FIELD",
          "name": "state",
          "content": {
            "type": "SYMBOL",
            "name": "custom_state"
          }
        },
        {
          "type": "STRING",
          "value": ")"
        }
      ]
    },
    "item_def": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "item"
        },
        {
          "type": "FIELD",
          "name": "item_id",
          "content": {
            "type": "SYMBOL",
            "name": "item_id"
          }
        },
        {
          "type": "SYMBOL",
          "name": "item_block"
        }
      ]
    },
    "item_block": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "{"
        },
        {
          "type": "REPEAT",
          "content": {
            "type": "SYMBOL",
            "name": "_item_stmt"
          }
        },
        {
          "type": "STRING",
          "value": "}"
        }
      ]
    },
    "_item_stmt": {
      "type": "CHOICE",
      "members": [
        {
          "type": "SYMBOL",
          "name": "item_name_stmt"
        },
        {
          "type": "SYMBOL",
          "name": "item_desc_stmt"
        },
        {
          "type": "SYMBOL",
          "name": "item_loc_stmt"
        },
        {
          "type": "SYMBOL",
          "name": "item_portable_stmt"
        },
        {
          "type": "SYMBOL",
          "name": "item_ability_stmt"
        },
        {
          "type": "SYMBOL",
          "name": "item_text_stmt"
        },
        {
          "type": "SYMBOL",
          "name": "item_restricted_stmt"
        },
        {
          "type": "SYMBOL",
          "name": "item_container_stmt"
        },
        {
          "type": "SYMBOL",
          "name": "item_requires_stmt"
        },
        {
          "type": "SYMBOL",
          "name": "item_consumable_stmt"
        }
      ]
    },
    "item_name_stmt": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "name"
        },
        {
          "type": "FIELD",
          "name": "item_name",
          "content": {
            "type": "SYMBOL",
            "name": "entity_name"
          }
        }
      ]
    },
    "item_desc_stmt": {
      "type": "SEQ",
      "members": [
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "STRING",
              "value": "desc"
            },
            {
              "type": "STRING",
              "value": "description"
            }
          ]
        },
        {
          "type": "FIELD",
          "name": "item_description",
          "content": {
            "type": "SYMBOL",
            "name": "entity_desc"
          }
        }
      ]
    },
    "item_loc_stmt": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "location"
        },
        {
          "type": "SYMBOL",
          "name": "item_location"
        }
      ]
    },
    "item_location": {
      "type": "CHOICE",
      "members": [
        {
          "type": "SEQ",
          "members": [
            {
              "type": "STRING",
              "value": "inventory"
            },
            {
              "type": "STRING",
              "value": "player"
            }
          ]
        },
        {
          "type": "SEQ",
          "members": [
            {
              "type": "STRING",
              "value": "room"
            },
            {
              "type": "FIELD",
              "name": "room_id",
              "content": {
                "type": "SYMBOL",
                "name": "_room_ref"
              }
            }
          ]
        },
        {
          "type": "SEQ",
          "members": [
            {
              "type": "STRING",
              "value": "chest"
            },
            {
              "type": "FIELD",
              "name": "chest_id",
              "content": {
                "type": "SYMBOL",
                "name": "_item_ref"
              }
            }
          ]
        },
        {
          "type": "SEQ",
          "members": [
            {
              "type": "STRING",
              "value": "npc"
            },
            {
              "type": "FIELD",
              "name": "npc_id",
              "content": {
                "type": "SYMBOL",
                "name": "_npc_ref"
              }
            }
          ]
        },
        {
          "type": "SEQ",
          "members": [
            {
              "type": "STRING",
              "value": "nowhere"
            },
            {
              "type": "FIELD",
              "name": "spawn_note",
              "content": {
                "type": "ALIAS",
                "content": {
                  "type": "SYMBOL",
                  "name": "string"
                },
                "named": true,
                "value": "dev_note"
              }
            }
          ]
        }
      ]
    },
    "item_portable_stmt": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "portable"
        },
        {
          "type": "FIELD",
          "name": "portable",
          "content": {
            "type": "SYMBOL",
            "name": "boolean"
          }
        }
      ]
    },
    "item_restricted_stmt": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "restricted"
        },
        {
          "type": "FIELD",
          "name": "restricted",
          "content": {
            "type": "SYMBOL",
            "name": "boolean"
          }
        }
      ]
    },
    "item_ability_stmt": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "ability"
        },
        {
          "type": "FIELD",
          "name": "ability",
          "content": {
            "type": "SYMBOL",
            "name": "item_ability"
          }
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "FIELD",
              "name": "target_id",
              "content": {
                "type": "SYMBOL",
                "name": "_item_ref"
              }
            },
            {
              "type": "BLANK"
            }
          ]
        }
      ]
    },
    "item_text_stmt": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "text"
        },
        {
          "type": "FIELD",
          "name": "detail_text",
          "content": {
            "type": "ALIAS",
            "content": {
              "type": "SYMBOL",
              "name": "string"
            },
            "named": true,
            "value": "item_detail_text"
          }
        }
      ]
    },
    "item_container_stmt": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "container"
        },
        {
          "type": "STRING",
          "value": "state"
        },
        {
          "type": "SYMBOL",
          "name": "container_state"
        }
      ]
    },
    "container_state": {
      "type": "CHOICE",
      "members": [
        {
          "type": "STRING",
          "value": "open"
        },
        {
          "type": "STRING",
          "value": "closed"
        },
        {
          "type": "STRING",
          "value": "locked"
        },
        {
          "type": "STRING",
          "value": "transparentClosed"
        },
        {
          "type": "STRING",
          "value": "transparentLocked"
        },
        {
          "type": "STRING",
          "value": "none"
        }
      ]
    },
    "item_requires_stmt": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "requires"
        },
        {
          "type": "FIELD",
          "name": "ability",
          "content": {
            "type": "SYMBOL",
            "name": "item_ability"
          }
        },
        {
          "type": "STRING",
          "value": "to"
        },
        {
          "type": "FIELD",
          "name": "interaction",
          "content": {
            "type": "SYMBOL",
            "name": "item_interaction"
          }
        }
      ]
    },
    "item_consumable_stmt": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "consumable"
        },
        {
          "type": "SYMBOL",
          "name": "consumable_block"
        }
      ]
    },
    "consumable_block": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "{"
        },
        {
          "type": "REPEAT",
          "content": {
            "type": "SYMBOL",
            "name": "_consumable_stmt"
          }
        },
        {
          "type": "STRING",
          "value": "}"
        }
      ]
    },
    "_consumable_stmt": {
      "type": "CHOICE",
      "members": [
        {
          "type": "SYMBOL",
          "name": "consumable_uses"
        },
        {
          "type": "SYMBOL",
          "name": "consumable_consume_on"
        },
        {
          "type": "SYMBOL",
          "name": "consumable_when_consumed"
        }
      ]
    },
    "consumable_uses": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "uses_left"
        },
        {
          "type": "FIELD",
          "name": "uses_left",
          "content": {
            "type": "SYMBOL",
            "name": "number"
          }
        }
      ]
    },
    "consumable_consume_on": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "consume_on"
        },
        {
          "type": "STRING",
          "value": "ability"
        },
        {
          "type": "FIELD",
          "name": "ability",
          "content": {
            "type": "SYMBOL",
            "name": "item_ability"
          }
        }
      ]
    },
    "consumable_when_consumed": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "when_consumed"
        },
        {
          "type": "SYMBOL",
          "name": "when_consumed_opt"
        }
      ]
    },
    "when_consumed_opt": {
      "type": "CHOICE",
      "members": [
        {
          "type": "STRING",
          "value": "despawn"
        },
        {
          "type": "SEQ",
          "members": [
            {
              "type": "STRING",
              "value": "replace"
            },
            {
              "type": "CHOICE",
              "members": [
                {
                  "type": "SEQ",
                  "members": [
                    {
                      "type": "STRING",
                      "value": "inventory"
                    },
                    {
                      "type": "FIELD",
                      "name": "item_id",
                      "content": {
                        "type": "SYMBOL",
                        "name": "_item_ref"
                      }
                    }
                  ]
                },
                {
                  "type": "SEQ",
                  "members": [
                    {
                      "type": "STRING",
                      "value": "current"
                    },
                    {
                      "type": "STRING",
                      "value": "room"
                    },
                    {
                      "type": "FIELD",
                      "name": "item_id",
                      "content": {
                        "type": "SYMBOL",
                        "name": "_item_ref"
                      }
                    }
                  ]
                }
              ]
            }
          ]
        }
      ]
    },
    "npc_def": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "npc"
        },
        {
          "type": "FIELD",
          "name": "npc_id",
          "content": {
            "type": "SYMBOL",
            "name": "npc_id"
          }
        },
        {
          "type": "SYMBOL",
          "name": "npc_block"
        }
      ]
    },
    "npc_block": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "{"
        },
        {
          "type": "REPEAT",
          "content": {
            "type": "SYMBOL",
            "name": "_npc_stmt"
          }
        },
        {
          "type": "STRING",
          "value": "}"
        }
      ]
    },
    "_npc_stmt": {
      "type": "CHOICE",
      "members": [
        {
          "type": "SYMBOL",
          "name": "npc_name_stmt"
        },
        {
          "type": "SYMBOL",
          "name": "npc_desc_stmt"
        },
        {
          "type": "SYMBOL",
          "name": "npc_loc_stmt"
        },
        {
          "type": "SYMBOL",
          "name": "npc_state_stmt"
        },
        {
          "type": "SYMBOL",
          "name": "npc_movement_stmt"
        },
        {
          "type": "SYMBOL",
          "name": "npc_dialogue_block"
        }
      ]
    },
    "npc_name_stmt": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "name"
        },
        {
          "type": "FIELD",
          "name": "npc_name",
          "content": {
            "type": "SYMBOL",
            "name": "entity_name"
          }
        }
      ]
    },
    "npc_desc_stmt": {
      "type": "SEQ",
      "members": [
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "STRING",
              "value": "desc"
            },
            {
              "type": "STRING",
              "value": "description"
            }
          ]
        },
        {
          "type": "FIELD",
          "name": "npc_description",
          "content": {
            "type": "SYMBOL",
            "name": "entity_desc"
          }
        }
      ]
    },
    "npc_loc_stmt": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "location"
        },
        {
          "type": "SYMBOL",
          "name": "npc_location"
        }
      ]
    },
    "npc_location": {
      "type": "CHOICE",
      "members": [
        {
          "type": "SEQ",
          "members": [
            {
              "type": "STRING",
              "value": "nowhere"
            },
            {
              "type": "FIELD",
              "name": "spawn_note",
              "content": {
                "type": "ALIAS",
                "content": {
                  "type": "SYMBOL",
                  "name": "string"
                },
                "named": true,
                "value": "dev_note"
              }
            }
          ]
        },
        {
          "type": "SEQ",
          "members": [
            {
              "type": "STRING",
              "value": "room"
            },
            {
              "type": "FIELD",
              "name": "room_id",
              "content": {
                "type": "SYMBOL",
                "name": "_room_ref"
              }
            }
          ]
        }
      ]
    },
    "npc_state_stmt": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "state"
        },
        {
          "type": "SYMBOL",
          "name": "npc_state"
        }
      ]
    },
    "npc_movement_stmt": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "movement"
        },
        {
          "type": "SYMBOL",
          "name": "movement_type"
        },
        {
          "type": "STRING",
          "value": "rooms"
        },
        {
          "type": "SYMBOL",
          "name": "room_list"
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "SYMBOL",
              "name": "timing_stmt"
            },
            {
              "type": "BLANK"
            }
          ]
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "SYMBOL",
              "name": "active_stmt"
            },
            {
              "type": "BLANK"
            }
          ]
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "SYMBOL",
              "name": "loop_stmt"
            },
            {
              "type": "BLANK"
            }
          ]
        }
      ]
    },
    "movement_type": {
      "type": "CHOICE",
      "members": [
        {
          "type": "STRING",
          "value": "route"
        },
        {
          "type": "STRING",
          "value": "random"
        }
      ]
    },
    "room_list": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "("
        },
        {
          "type": "SEQ",
          "members": [
            {
              "type": "FIELD",
              "name": "room_id",
              "content": {
                "type": "SYMBOL",
                "name": "_room_ref"
              }
            },
            {
              "type": "REPEAT",
              "content": {
                "type": "SEQ",
                "members": [
                  {
                    "type": "STRING",
                    "value": ","
                  },
                  {
                    "type": "FIELD",
                    "name": "room_id",
                    "content": {
                      "type": "SYMBOL",
                      "name": "_room_ref"
                    }
                  }
                ]
              }
            }
          ]
        },
        {
          "type": "STRING",
          "value": ")"
        }
      ]
    },
    "timing_stmt": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "timing"
        },
        {
          "type": "FIELD",
          "name": "timing",
          "content": {
            "type": "ALIAS",
            "content": {
              "type": "SYMBOL",
              "name": "identifier"
            },
            "named": true,
            "value": "timing"
          }
        }
      ]
    },
    "active_stmt": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "active"
        },
        {
          "type": "FIELD",
          "name": "active",
          "content": {
            "type": "SYMBOL",
            "name": "boolean"
          }
        }
      ]
    },
    "loop_stmt": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "loop"
        },
        {
          "type": "FIELD",
          "name": "loop",
          "content": {
            "type": "SYMBOL",
            "name": "boolean"
          }
        }
      ]
    },
    "npc_dialogue_block": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "dialogue"
        },
        {
          "type": "SYMBOL",
          "name": "npc_state"
        },
        {
          "type": "STRING",
          "value": "{"
        },
        {
          "type": "REPEAT1",
          "content": {
            "type": "FIELD",
            "name": "dialogue",
            "content": {
              "type": "ALIAS",
              "content": {
                "type": "SYMBOL",
                "name": "string"
              },
              "named": true,
              "value": "npc_dialogue"
            }
          }
        },
        {
          "type": "STRING",
          "value": "}"
        }
      ]
    },
    "trigger_def": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "trigger"
        },
        {
          "type": "FIELD",
          "name": "name",
          "content": {
            "type": "ALIAS",
            "content": {
              "type": "SYMBOL",
              "name": "string"
            },
            "named": true,
            "value": "entity_name"
          }
        },
        {
          "type": "REPEAT",
          "content": {
            "type": "CHOICE",
            "members": [
              {
                "type": "FIELD",
                "name": "once",
                "content": {
                  "type": "SYMBOL",
                  "name": "only_once_kw"
                }
              },
              {
                "type": "SYMBOL",
                "name": "trigger_note"
              }
            ]
          }
        },
        {
          "type": "STRING",
          "value": "when"
        },
        {
          "type": "SYMBOL",
          "name": "when_cond"
        },
        {
          "type": "SYMBOL",
          "name": "trigger_block"
        }
      ]
    },
    "only_once_kw": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "only"
        },
        {
          "type": "STRING",
          "value": "once"
        }
      ]
    },
    "trigger_note": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "note"
        },
        {
          "type": "FIELD",
          "name": "trigger_note",
          "content": {
            "type": "ALIAS",
            "content": {
              "type": "SYMBOL",
              "name": "string"
            },
            "named": true,
            "value": "dev_note"
          }
        }
      ]
    },
    "_when_event": {
      "type": "CHOICE",
      "members": [
        {
          "type": "SYMBOL",
          "name": "always_event"
        },
        {
          "type": "SYMBOL",
          "name": "enter_room"
        },
        {
          "type": "SYMBOL",
          "name": "take_item"
        },
        {
          "type": "SYMBOL",
          "name": "talk_to_npc"
        },
        {
          "type": "SYMBOL",
          "name": "open_item"
        },
        {
          "type": "SYMBOL",
          "name": "leave_room"
        },
        {
          "type": "SYMBOL",
          "name": "look_at_item"
        },
        {
          "type": "SYMBOL",
          "name": "use_item"
        },
        {
          "type": "SYMBOL",
          "name": "give_to_npc"
        },
        {
          "type": "SYMBOL",
          "name": "use_item_on_item"
        },
        {
          "type": "SYMBOL",
          "name": "act_on_item"
        },
        {
          "type": "SYMBOL",
          "name": "take_from_npc"
        },
        {
          "type": "SYMBOL",
          "name": "insert_item_into"
        },
        {
          "type": "SYMBOL",
          "name": "drop_item"
        },
        {
          "type": "SYMBOL",
          "name": "unlock_item"
        },
        {
          "type": "SYMBOL",
          "name": "ingest_item"
        }
      ]
    },
    "_trigger_cond_atom": {
      "type": "CHOICE",
      "members": [
        {
          "type": "SYMBOL",
          "name": "cond_any_group"
        },
        {
          "type": "SYMBOL",
          "name": "cond_all_group"
        },
        {
          "type": "SYMBOL",
          "name": "cond_has_flag"
        },
        {
          "type": "SYMBOL",
          "name": "cond_missing_flag"
        },
        {
          "type": "SYMBOL",
          "name": "cond_has_item"
        },
        {
          "type": "SYMBOL",
          "name": "cond_missing_item"
        },
        {
          "type": "SYMBOL",
          "name": "cond_visited_room"
        },
        {
          "type": "SYMBOL",
          "name": "cond_flag_in_progress"
        },
        {
          "type": "SYMBOL",
          "name": "cond_flag_complete"
        },
        {
          "type": "SYMBOL",
          "name": "cond_with_npc"
        },
        {
          "type": "SYMBOL",
          "name": "cond_npc_has_item"
        },
        {
          "type": "SYMBOL",
          "name": "cond_npc_in_state"
        },
        {
          "type": "SYMBOL",
          "name": "cond_player_in_room"
        },
        {
          "type": "SYMBOL",
          "name": "cond_container_has_item"
        },
        {
          "type": "SYMBOL",
          "name": "cond_chance"
        },
        {
          "type": "SYMBOL",
          "name": "cond_ambient"
        },
        {
          "type": "SYMBOL",
          "name": "cond_in_rooms"
        }
      ]
    },
    "when_cond": {
      "type": "SYMBOL",
      "name": "_when_event"
    },
    "always_event": {
      "type": "STRING",
      "value": "always"
    },
    "enter_room": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "enter"
        },
        {
          "type": "STRING",
          "value": "room"
        },
        {
          "type": "FIELD",
          "name": "room_id",
          "content": {
            "type": "SYMBOL",
            "name": "_room_ref"
          }
        }
      ]
    },
    "leave_room": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "leave"
        },
        {
          "type": "STRING",
          "value": "room"
        },
        {
          "type": "FIELD",
          "name": "room_id",
          "content": {
            "type": "SYMBOL",
            "name": "_room_ref"
          }
        }
      ]
    },
    "take_item": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "take"
        },
        {
          "type": "STRING",
          "value": "item"
        },
        {
          "type": "FIELD",
          "name": "item_id",
          "content": {
            "type": "SYMBOL",
            "name": "_item_ref"
          }
        }
      ]
    },
    "drop_item": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "drop"
        },
        {
          "type": "STRING",
          "value": "item"
        },
        {
          "type": "FIELD",
          "name": "item_id",
          "content": {
            "type": "SYMBOL",
            "name": "_item_ref"
          }
        }
      ]
    },
    "open_item": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "open"
        },
        {
          "type": "STRING",
          "value": "item"
        },
        {
          "type": "FIELD",
          "name": "item_id",
          "content": {
            "type": "SYMBOL",
            "name": "_item_ref"
          }
        }
      ]
    },
    "unlock_item": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "unlock"
        },
        {
          "type": "STRING",
          "value": "item"
        },
        {
          "type": "FIELD",
          "name": "item_id",
          "content": {
            "type": "SYMBOL",
            "name": "_item_ref"
          }
        }
      ]
    },
    "talk_to_npc": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "talk"
        },
        {
          "type": "STRING",
          "value": "to"
        },
        {
          "type": "STRING",
          "value": "npc"
        },
        {
          "type": "FIELD",
          "name": "npc_id",
          "content": {
            "type": "SYMBOL",
            "name": "_npc_ref"
          }
        }
      ]
    },
    "look_at_item": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "look"
        },
        {
          "type": "STRING",
          "value": "at"
        },
        {
          "type": "STRING",
          "value": "item"
        },
        {
          "type": "FIELD",
          "name": "item_id",
          "content": {
            "type": "SYMBOL",
            "name": "_item_ref"
          }
        }
      ]
    },
    "use_item": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "use"
        },
        {
          "type": "STRING",
          "value": "item"
        },
        {
          "type": "FIELD",
          "name": "item_id",
          "content": {
            "type": "SYMBOL",
            "name": "_item_ref"
          }
        },
        {
          "type": "STRING",
          "value": "ability"
        },
        {
          "type": "FIELD",
          "name": "ability",
          "content": {
            "type": "SYMBOL",
            "name": "item_ability"
          }
        }
      ]
    },
    "give_to_npc": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "give"
        },
        {
          "type": "STRING",
          "value": "item"
        },
        {
          "type": "FIELD",
          "name": "item_id",
          "content": {
            "type": "SYMBOL",
            "name": "_item_ref"
          }
        },
        {
          "type": "STRING",
          "value": "to"
        },
        {
          "type": "STRING",
          "value": "npc"
        },
        {
          "type": "FIELD",
          "name": "npc_id",
          "content": {
            "type": "SYMBOL",
            "name": "_npc_ref"
          }
        }
      ]
    },
    "use_item_on_item": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "use"
        },
        {
          "type": "STRING",
          "value": "item"
        },
        {
          "type": "FIELD",
          "name": "tool_id",
          "content": {
            "type": "SYMBOL",
            "name": "_item_ref"
          }
        },
        {
          "type": "STRING",
          "value": "on"
        },
        {
          "type": "STRING",
          "value": "item"
        },
        {
          "type": "FIELD",
          "name": "target_id",
          "content": {
            "type": "SYMBOL",
            "name": "_item_ref"
          }
        },
        {
          "type": "STRING",
          "value": "interaction"
        },
        {
          "type": "FIELD",
          "name": "interaction",
          "content": {
            "type": "SYMBOL",
            "name": "item_interaction"
          }
        }
      ]
    },
    "act_on_item": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "act"
        },
        {
          "type": "FIELD",
          "name": "action",
          "content": {
            "type": "SYMBOL",
            "name": "item_interaction"
          }
        },
        {
          "type": "STRING",
          "value": "on"
        },
        {
          "type": "STRING",
          "value": "item"
        },
        {
          "type": "FIELD",
          "name": "item_id",
          "content": {
            "type": "SYMBOL",
            "name": "_item_ref"
          }
        }
      ]
    },
    "take_from_npc": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "take"
        },
        {
          "type": "STRING",
          "value": "item"
        },
        {
          "type": "FIELD",
          "name": "item_id",
          "content": {
            "type": "SYMBOL",
            "name": "_item_ref"
          }
        },
        {
          "type": "STRING",
          "value": "from"
        },
        {
          "type": "STRING",
          "value": "npc"
        },
        {
          "type": "FIELD",
          "name": "npc_id",
          "content": {
            "type": "SYMBOL",
            "name": "_npc_ref"
          }
        }
      ]
    },
    "insert_item_into": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "insert"
        },
        {
          "type": "STRING",
          "value": "item"
        },
        {
          "type": "FIELD",
          "name": "item_id",
          "content": {
            "type": "SYMBOL",
            "name": "_item_ref"
          }
        },
        {
          "type": "STRING",
          "value": "into"
        },
        {
          "type": "STRING",
          "value": "item"
        },
        {
          "type": "FIELD",
          "name": "item_id",
          "content": {
            "type": "SYMBOL",
            "name": "_item_ref"
          }
        }
      ]
    },
    "ingest_item": {
      "type": "SEQ",
      "members": [
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "STRING",
              "value": "drink"
            },
            {
              "type": "STRING",
              "value": "eat"
            },
            {
              "type": "STRING",
              "value": "inhale"
            }
          ]
        },
        {
          "type": "STRING",
          "value": "item"
        },
        {
          "type": "FIELD",
          "name": "item_id",
          "content": {
            "type": "SYMBOL",
            "name": "_item_ref"
          }
        }
      ]
    },
    "trigger_block": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "{"
        },
        {
          "type": "REPEAT1",
          "content": {
            "type": "SYMBOL",
            "name": "_trigger_stmt"
          }
        },
        {
          "type": "STRING",
          "value": "}"
        }
      ]
    },
    "_trigger_stmt": {
      "type": "CHOICE",
      "members": [
        {
          "type": "SYMBOL",
          "name": "do_action"
        },
        {
          "type": "SYMBOL",
          "name": "cond_block"
        }
      ]
    },
    "cond_block": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "if"
        },
        {
          "type": "SYMBOL",
          "name": "trigger_cond"
        },
        {
          "type": "STRING",
          "value": "{"
        },
        {
          "type": "REPEAT1",
          "content": {
            "type": "SYMBOL",
            "name": "do_action"
          }
        },
        {
          "type": "STRING",
          "value": "}"
        }
      ]
    },
    "trigger_cond": {
      "type": "SYMBOL",
      "name": "_trigger_cond_atom"
    },
    "cond_any_group": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "any"
        },
        {
          "type": "STRING",
          "value": "("
        },
        {
          "type": "SEQ",
          "members": [
            {
              "type": "SYMBOL",
              "name": "trigger_cond"
            },
            {
              "type": "REPEAT",
              "content": {
                "type": "SEQ",
                "members": [
                  {
                    "type": "STRING",
                    "value": ","
                  },
                  {
                    "type": "SYMBOL",
                    "name": "trigger_cond"
                  }
                ]
              }
            }
          ]
        },
        {
          "type": "STRING",
          "value": ")"
        }
      ]
    },
    "cond_all_group": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "all"
        },
        {
          "type": "STRING",
          "value": "("
        },
        {
          "type": "SEQ",
          "members": [
            {
              "type": "SYMBOL",
              "name": "trigger_cond"
            },
            {
              "type": "REPEAT",
              "content": {
                "type": "SEQ",
                "members": [
                  {
                    "type": "STRING",
                    "value": ","
                  },
                  {
                    "type": "SYMBOL",
                    "name": "trigger_cond"
                  }
                ]
              }
            }
          ]
        },
        {
          "type": "STRING",
          "value": ")"
        }
      ]
    },
    "cond_has_flag": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "has"
        },
        {
          "type": "STRING",
          "value": "flag"
        },
        {
          "type": "FIELD",
          "name": "flag_name",
          "content": {
            "type": "SYMBOL",
            "name": "_flag_ref"
          }
        }
      ]
    },
    "cond_missing_flag": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "missing"
        },
        {
          "type": "STRING",
          "value": "flag"
        },
        {
          "type": "FIELD",
          "name": "flag_name",
          "content": {
            "type": "SYMBOL",
            "name": "_flag_ref"
          }
        }
      ]
    },
    "cond_has_item": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "has"
        },
        {
          "type": "STRING",
          "value": "item"
        },
        {
          "type": "FIELD",
          "name": "item_id",
          "content": {
            "type": "SYMBOL",
            "name": "_item_ref"
          }
        }
      ]
    },
    "cond_missing_item": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "missing"
        },
        {
          "type": "STRING",
          "value": "item"
        },
        {
          "type": "FIELD",
          "name": "item_id",
          "content": {
            "type": "SYMBOL",
            "name": "_item_ref"
          }
        }
      ]
    },
    "cond_visited_room": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "has"
        },
        {
          "type": "STRING",
          "value": "visited"
        },
        {
          "type": "STRING",
          "value": "room"
        },
        {
          "type": "FIELD",
          "name": "room_id",
          "content": {
            "type": "SYMBOL",
            "name": "_room_ref"
          }
        }
      ]
    },
    "cond_flag_in_progress": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "flag"
        },
        {
          "type": "STRING",
          "value": "in"
        },
        {
          "type": "STRING",
          "value": "progress"
        },
        {
          "type": "FIELD",
          "name": "flag_name",
          "content": {
            "type": "SYMBOL",
            "name": "_flag_ref"
          }
        }
      ]
    },
    "cond_flag_complete": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "flag"
        },
        {
          "type": "STRING",
          "value": "complete"
        },
        {
          "type": "FIELD",
          "name": "flag_name",
          "content": {
            "type": "SYMBOL",
            "name": "_flag_ref"
          }
        }
      ]
    },
    "cond_with_npc": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "with"
        },
        {
          "type": "STRING",
          "value": "npc"
        },
        {
          "type": "FIELD",
          "name": "npc_id",
          "content": {
            "type": "SYMBOL",
            "name": "_npc_ref"
          }
        }
      ]
    },
    "cond_npc_has_item": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "npc"
        },
        {
          "type": "STRING",
          "value": "has"
        },
        {
          "type": "STRING",
          "value": "item"
        },
        {
          "type": "FIELD",
          "name": "npc_id",
          "content": {
            "type": "SYMBOL",
            "name": "_npc_ref"
          }
        },
        {
          "type": "FIELD",
          "name": "item_id",
          "content": {
            "type": "SYMBOL",
            "name": "_item_ref"
          }
        }
      ]
    },
    "cond_npc_in_state": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "npc"
        },
        {
          "type": "STRING",
          "value": "in"
        },
        {
          "type": "STRING",
          "value": "state"
        },
        {
          "type": "FIELD",
          "name": "npc_id",
          "content": {
            "type": "SYMBOL",
            "name": "_npc_ref"
          }
        },
        {
          "type": "FIELD",
          "name": "state",
          "content": {
            "type": "SYMBOL",
            "name": "custom_state"
          }
        }
      ]
    },
    "cond_player_in_room": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "player"
        },
        {
          "type": "STRING",
          "value": "in"
        },
        {
          "type": "STRING",
          "value": "room"
        },
        {
          "type": "FIELD",
          "name": "room_id",
          "content": {
            "type": "SYMBOL",
            "name": "_room_ref"
          }
        }
      ]
    },
    "cond_container_has_item": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "container"
        },
        {
          "type": "FIELD",
          "name": "container_id",
          "content": {
            "type": "SYMBOL",
            "name": "_item_ref"
          }
        },
        {
          "type": "STRING",
          "value": "has"
        },
        {
          "type": "STRING",
          "value": "item"
        },
        {
          "type": "FIELD",
          "name": "item_id",
          "content": {
            "type": "SYMBOL",
            "name": "_item_ref"
          }
        }
      ]
    },
    "cond_chance": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "chance"
        },
        {
          "type": "FIELD",
          "name": "pct",
          "content": {
            "type": "SYMBOL",
            "name": "number"
          }
        },
        {
          "type": "STRING",
          "value": "%"
        }
      ]
    },
    "cond_ambient": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "ambient"
        },
        {
          "type": "FIELD",
          "name": "spinner",
          "content": {
            "type": "SYMBOL",
            "name": "_spinner_ref"
          }
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "PREC_LEFT",
              "value": 0,
              "content": {
                "type": "SEQ",
                "members": [
                  {
                    "type": "STRING",
                    "value": "in"
                  },
                  {
                    "type": "STRING",
                    "value": "rooms"
                  },
                  {
                    "type": "SEQ",
                    "members": [
                      {
                        "type": "FIELD",
                        "name": "room_id",
                        "content": {
                          "type": "SYMBOL",
                          "name": "_room_ref"
                        }
                      },
                      {
                        "type": "REPEAT",
                        "content": {
                          "type": "SEQ",
                          "members": [
                            {
                              "type": "STRING",
                              "value": ","
                            },
                            {
                              "type": "FIELD",
                              "name": "room_id",
                              "content": {
                                "type": "SYMBOL",
                                "name": "_room_ref"
                              }
                            }
                          ]
                        }
                      }
                    ]
                  }
                ]
              }
            },
            {
              "type": "BLANK"
            }
          ]
        }
      ]
    },
    "cond_in_rooms": {
      "type": "PREC_LEFT",
      "value": 0,
      "content": {
        "type": "SEQ",
        "members": [
          {
            "type": "STRING",
            "value": "in"
          },
          {
            "type": "STRING",
            "value": "rooms"
          },
          {
            "type": "SEQ",
            "members": [
              {
                "type": "FIELD",
                "name": "room_id",
                "content": {
                  "type": "SYMBOL",
                  "name": "_room_ref"
                }
              },
              {
                "type": "REPEAT",
                "content": {
                  "type": "SEQ",
                  "members": [
                    {
                      "type": "STRING",
                      "value": ","
                    },
                    {
                      "type": "FIELD",
                      "name": "room_id",
                      "content": {
                        "type": "SYMBOL",
                        "name": "_room_ref"
                      }
                    }
                  ]
                }
              }
            ]
          }
        ]
      }
    },
    "do_action": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "do"
        },
        {
          "type": "SYMBOL",
          "name": "_action_type"
        }
      ]
    },
    "_action_type": {
      "type": "CHOICE",
      "members": [
        {
          "type": "SYMBOL",
          "name": "action_show"
        },
        {
          "type": "SYMBOL",
          "name": "action_add_wedge"
        },
        {
          "type": "SYMBOL",
          "name": "action_add_seq"
        },
        {
          "type": "SYMBOL",
          "name": "action_replace_item"
        },
        {
          "type": "SYMBOL",
          "name": "action_replace_drop_item"
        },
        {
          "type": "SYMBOL",
          "name": "action_add_flag"
        },
        {
          "type": "SYMBOL",
          "name": "action_reset_flag"
        },
        {
          "type": "SYMBOL",
          "name": "action_remove_flag"
        },
        {
          "type": "SYMBOL",
          "name": "action_advance_flag"
        },
        {
          "type": "SYMBOL",
          "name": "action_spawn_room"
        },
        {
          "type": "SYMBOL",
          "name": "action_spawn_container"
        },
        {
          "type": "SYMBOL",
          "name": "action_spawn_inventory"
        },
        {
          "type": "SYMBOL",
          "name": "action_spawn_current_room"
        },
        {
          "type": "SYMBOL",
          "name": "action_despawn_item"
        },
        {
          "type": "SYMBOL",
          "name": "action_award_points"
        },
        {
          "type": "SYMBOL",
          "name": "action_lock_item"
        },
        {
          "type": "SYMBOL",
          "name": "action_unlock_item"
        },
        {
          "type": "SYMBOL",
          "name": "action_lock_exit"
        },
        {
          "type": "SYMBOL",
          "name": "action_unlock_exit"
        },
        {
          "type": "SYMBOL",
          "name": "action_reveal_exit"
        },
        {
          "type": "SYMBOL",
          "name": "action_push_player"
        },
        {
          "type": "SYMBOL",
          "name": "action_set_item_desc"
        },
        {
          "type": "SYMBOL",
          "name": "action_npc_random_dialogue"
        },
        {
          "type": "SYMBOL",
          "name": "action_npc_says"
        },
        {
          "type": "SYMBOL",
          "name": "action_npc_refuse_item"
        },
        {
          "type": "SYMBOL",
          "name": "action_set_npc_active"
        },
        {
          "type": "SYMBOL",
          "name": "action_set_npc_state"
        },
        {
          "type": "SYMBOL",
          "name": "action_deny_read"
        },
        {
          "type": "SYMBOL",
          "name": "action_restrict_item"
        },
        {
          "type": "SYMBOL",
          "name": "action_give_to_player"
        },
        {
          "type": "SYMBOL",
          "name": "action_set_barred_msg"
        },
        {
          "type": "SYMBOL",
          "name": "action_set_container_state"
        },
        {
          "type": "SYMBOL",
          "name": "action_spinner_msg"
        },
        {
          "type": "SYMBOL",
          "name": "action_schedule_in_or_on"
        },
        {
          "type": "SYMBOL",
          "name": "action_schedule_in_if"
        }
      ]
    },
    "action_show": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "show"
        },
        {
          "type": "FIELD",
          "name": "text",
          "content": {
            "type": "ALIAS",
            "content": {
              "type": "SYMBOL",
              "name": "string"
            },
            "named": true,
            "value": "player_message"
          }
        }
      ]
    },
    "action_add_wedge": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "add"
        },
        {
          "type": "STRING",
          "value": "wedge"
        },
        {
          "type": "FIELD",
          "name": "text",
          "content": {
            "type": "ALIAS",
            "content": {
              "type": "SYMBOL",
              "name": "string"
            },
            "named": true,
            "value": "wedge_text"
          }
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "SEQ",
              "members": [
                {
                  "type": "STRING",
                  "value": "width"
                },
                {
                  "type": "SYMBOL",
                  "name": "number"
                }
              ]
            },
            {
              "type": "BLANK"
            }
          ]
        },
        {
          "type": "STRING",
          "value": "spinner"
        },
        {
          "type": "FIELD",
          "name": "spinner",
          "content": {
            "type": "SYMBOL",
            "name": "_spinner_ref"
          }
        }
      ]
    },
    "action_add_seq": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "add"
        },
        {
          "type": "STRING",
          "value": "seq"
        },
        {
          "type": "STRING",
          "value": "flag"
        },
        {
          "type": "FIELD",
          "name": "flag_name",
          "content": {
            "type": "SYMBOL",
            "name": "flag_name"
          }
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "SEQ",
              "members": [
                {
                  "type": "STRING",
                  "value": "limit"
                },
                {
                  "type": "SYMBOL",
                  "name": "number"
                }
              ]
            },
            {
              "type": "BLANK"
            }
          ]
        }
      ]
    },
    "action_replace_item": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "replace"
        },
        {
          "type": "STRING",
          "value": "item"
        },
        {
          "type": "FIELD",
          "name": "item_id",
          "content": {
            "type": "SYMBOL",
            "name": "_item_ref"
          }
        },
        {
          "type": "STRING",
          "value": "with"
        },
        {
          "type": "FIELD",
          "name": "item_id",
          "content": {
            "type": "SYMBOL",
            "name": "_item_ref"
          }
        }
      ]
    },
    "action_replace_drop_item": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "replace"
        },
        {
          "type": "STRING",
          "value": "drop"
        },
        {
          "type": "STRING",
          "value": "item"
        },
        {
          "type": "FIELD",
          "name": "item_id",
          "content": {
            "type": "SYMBOL",
            "name": "_item_ref"
          }
        },
        {
          "type": "STRING",
          "value": "with"
        },
        {
          "type": "FIELD",
          "name": "item_id",
          "content": {
            "type": "SYMBOL",
            "name": "_item_ref"
          }
        }
      ]
    },
    "action_add_flag": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "add"
        },
        {
          "type": "STRING",
          "value": "flag"
        },
        {
          "type": "FIELD",
          "name": "flag",
          "content": {
            "type": "SYMBOL",
            "name": "flag_name"
          }
        }
      ]
    },
    "action_reset_flag": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "reset"
        },
        {
          "type": "STRING",
          "value": "flag"
        },
        {
          "type": "FIELD",
          "name": "flag",
          "content": {
            "type": "SYMBOL",
            "name": "_flag_ref"
          }
        }
      ]
    },
    "action_remove_flag": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "remove"
        },
        {
          "type": "STRING",
          "value": "flag"
        },
        {
          "type": "FIELD",
          "name": "flag",
          "content": {
            "type": "SYMBOL",
            "name": "_flag_ref"
          }
        }
      ]
    },
    "action_advance_flag": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "advance"
        },
        {
          "type": "STRING",
          "value": "flag"
        },
        {
          "type": "FIELD",
          "name": "flag",
          "content": {
            "type": "SYMBOL",
            "name": "_flag_ref"
          }
        }
      ]
    },
    "spawn_action_stem": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "spawn"
        },
        {
          "type": "STRING",
          "value": "item"
        },
        {
          "type": "FIELD",
          "name": "item_id",
          "content": {
            "type": "SYMBOL",
            "name": "_item_ref"
          }
        }
      ]
    },
    "action_spawn_room": {
      "type": "SEQ",
      "members": [
        {
          "type": "SYMBOL",
          "name": "spawn_action_stem"
        },
        {
          "type": "STRING",
          "value": "into"
        },
        {
          "type": "STRING",
          "value": "room"
        },
        {
          "type": "FIELD",
          "name": "room",
          "content": {
            "type": "SYMBOL",
            "name": "_room_ref"
          }
        }
      ]
    },
    "action_spawn_container": {
      "type": "SEQ",
      "members": [
        {
          "type": "SYMBOL",
          "name": "spawn_action_stem"
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "STRING",
              "value": "into"
            },
            {
              "type": "STRING",
              "value": "in"
            }
          ]
        },
        {
          "type": "STRING",
          "value": "container"
        },
        {
          "type": "FIELD",
          "name": "container_id",
          "content": {
            "type": "SYMBOL",
            "name": "_item_ref"
          }
        }
      ]
    },
    "action_spawn_inventory": {
      "type": "SEQ",
      "members": [
        {
          "type": "SYMBOL",
          "name": "spawn_action_stem"
        },
        {
          "type": "STRING",
          "value": "in"
        },
        {
          "type": "STRING",
          "value": "inventory"
        }
      ]
    },
    "action_spawn_current_room": {
      "type": "SEQ",
      "members": [
        {
          "type": "SYMBOL",
          "name": "spawn_action_stem"
        },
        {
          "type": "STRING",
          "value": "in"
        },
        {
          "type": "STRING",
          "value": "current"
        },
        {
          "type": "STRING",
          "value": "room"
        }
      ]
    },
    "action_despawn_item": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "despawn"
        },
        {
          "type": "STRING",
          "value": "item"
        },
        {
          "type": "FIELD",
          "name": "item_id",
          "content": {
            "type": "SYMBOL",
            "name": "_item_ref"
          }
        }
      ]
    },
    "action_award_points": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "award"
        },
        {
          "type": "STRING",
          "value": "points"
        },
        {
          "type": "FIELD",
          "name": "points",
          "content": {
            "type": "SYMBOL",
            "name": "number"
          }
        }
      ]
    },
    "action_lock_item": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "lock"
        },
        {
          "type": "STRING",
          "value": "item"
        },
        {
          "type": "FIELD",
          "name": "item_id",
          "content": {
            "type": "SYMBOL",
            "name": "_item_ref"
          }
        }
      ]
    },
    "action_unlock_item": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "unlock"
        },
        {
          "type": "STRING",
          "value": "item"
        },
        {
          "type": "FIELD",
          "name": "item_id",
          "content": {
            "type": "SYMBOL",
            "name": "_item_ref"
          }
        }
      ]
    },
    "action_lock_exit": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "lock"
        },
        {
          "type": "STRING",
          "value": "exit"
        },
        {
          "type": "STRING",
          "value": "from"
        },
        {
          "type": "FIELD",
          "name": "room_id",
          "content": {
            "type": "SYMBOL",
            "name": "_room_ref"
          }
        },
        {
          "type": "STRING",
          "value": "direction"
        },
        {
          "type": "FIELD",
          "name": "direction",
          "content": {
            "type": "SYMBOL",
            "name": "exit_dir"
          }
        }
      ]
    },
    "action_unlock_exit": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "unlock"
        },
        {
          "type": "STRING",
          "value": "exit"
        },
        {
          "type": "STRING",
          "value": "from"
        },
        {
          "type": "FIELD",
          "name": "room_id",
          "content": {
            "type": "SYMBOL",
            "name": "_room_ref"
          }
        },
        {
          "type": "STRING",
          "value": "direction"
        },
        {
          "type": "FIELD",
          "name": "direction",
          "content": {
            "type": "SYMBOL",
            "name": "exit_dir"
          }
        }
      ]
    },
    "action_reveal_exit": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "reveal"
        },
        {
          "type": "STRING",
          "value": "exit"
        },
        {
          "type": "STRING",
          "value": "from"
        },
        {
          "type": "FIELD",
          "name": "from_room",
          "content": {
            "type": "SYMBOL",
            "name": "_room_ref"
          }
        },
        {
          "type": "STRING",
          "value": "to"
        },
        {
          "type": "FIELD",
          "name": "to_room",
          "content": {
            "type": "SYMBOL",
            "name": "_room_ref"
          }
        },
        {
          "type": "STRING",
          "value": "direction"
        },
        {
          "type": "FIELD",
          "name": "direction",
          "content": {
            "type": "SYMBOL",
            "name": "exit_dir"
          }
        }
      ]
    },
    "action_push_player": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "push"
        },
        {
          "type": "STRING",
          "value": "player"
        },
        {
          "type": "STRING",
          "value": "to"
        },
        {
          "type": "FIELD",
          "name": "room_id",
          "content": {
            "type": "SYMBOL",
            "name": "_room_ref"
          }
        }
      ]
    },
    "action_set_item_desc": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "set"
        },
        {
          "type": "STRING",
          "value": "item"
        },
        {
          "type": "STRING",
          "value": "description"
        },
        {
          "type": "FIELD",
          "name": "item_id",
          "content": {
            "type": "SYMBOL",
            "name": "_item_ref"
          }
        },
        {
          "type": "FIELD",
          "name": "text",
          "content": {
            "type": "ALIAS",
            "content": {
              "type": "SYMBOL",
              "name": "string"
            },
            "named": true,
            "value": "entity_desc"
          }
        }
      ]
    },
    "action_npc_random_dialogue": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "npc"
        },
        {
          "type": "STRING",
          "value": "random"
        },
        {
          "type": "STRING",
          "value": "dialogue"
        },
        {
          "type": "FIELD",
          "name": "npc_id",
          "content": {
            "type": "SYMBOL",
            "name": "_npc_ref"
          }
        }
      ]
    },
    "action_npc_says": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "npc"
        },
        {
          "type": "STRING",
          "value": "says"
        },
        {
          "type": "FIELD",
          "name": "npc_id",
          "content": {
            "type": "SYMBOL",
            "name": "_npc_ref"
          }
        },
        {
          "type": "FIELD",
          "name": "text",
          "content": {
            "type": "ALIAS",
            "content": {
              "type": "SYMBOL",
              "name": "string"
            },
            "named": true,
            "value": "quote"
          }
        }
      ]
    },
    "action_npc_refuse_item": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "npc"
        },
        {
          "type": "STRING",
          "value": "refuse"
        },
        {
          "type": "STRING",
          "value": "item"
        },
        {
          "type": "FIELD",
          "name": "npc_id",
          "content": {
            "type": "SYMBOL",
            "name": "_npc_ref"
          }
        },
        {
          "type": "FIELD",
          "name": "reason",
          "content": {
            "type": "ALIAS",
            "content": {
              "type": "SYMBOL",
              "name": "string"
            },
            "named": true,
            "value": "player_message"
          }
        }
      ]
    },
    "action_set_npc_active": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "set"
        },
        {
          "type": "STRING",
          "value": "npc"
        },
        {
          "type": "STRING",
          "value": "active"
        },
        {
          "type": "FIELD",
          "name": "npc_id",
          "content": {
            "type": "SYMBOL",
            "name": "_npc_ref"
          }
        },
        {
          "type": "SYMBOL",
          "name": "boolean"
        }
      ]
    },
    "action_set_npc_state": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "set"
        },
        {
          "type": "STRING",
          "value": "npc"
        },
        {
          "type": "STRING",
          "value": "state"
        },
        {
          "type": "FIELD",
          "name": "npc_id",
          "content": {
            "type": "SYMBOL",
            "name": "_npc_ref"
          }
        },
        {
          "type": "FIELD",
          "name": "state",
          "content": {
            "type": "SYMBOL",
            "name": "custom_state"
          }
        }
      ]
    },
    "action_deny_read": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "deny"
        },
        {
          "type": "STRING",
          "value": "read"
        },
        {
          "type": "FIELD",
          "name": "reason",
          "content": {
            "type": "ALIAS",
            "content": {
              "type": "SYMBOL",
              "name": "string"
            },
            "named": true,
            "value": "player_message"
          }
        }
      ]
    },
    "action_restrict_item": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "restrict"
        },
        {
          "type": "STRING",
          "value": "item"
        },
        {
          "type": "FIELD",
          "name": "item_id",
          "content": {
            "type": "SYMBOL",
            "name": "_item_ref"
          }
        }
      ]
    },
    "action_give_to_player": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "give"
        },
        {
          "type": "STRING",
          "value": "item"
        },
        {
          "type": "FIELD",
          "name": "item_id",
          "content": {
            "type": "SYMBOL",
            "name": "_item_ref"
          }
        },
        {
          "type": "STRING",
          "value": "to"
        },
        {
          "type": "STRING",
          "value": "player"
        },
        {
          "type": "STRING",
          "value": "from"
        },
        {
          "type": "STRING",
          "value": "npc"
        },
        {
          "type": "FIELD",
          "name": "npc_id",
          "content": {
            "type": "SYMBOL",
            "name": "_npc_ref"
          }
        }
      ]
    },
    "action_set_barred_msg": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "set"
        },
        {
          "type": "STRING",
          "value": "barred"
        },
        {
          "type": "STRING",
          "value": "message"
        },
        {
          "type": "STRING",
          "value": "from"
        },
        {
          "type": "FIELD",
          "name": "room_id",
          "content": {
            "type": "SYMBOL",
            "name": "_room_ref"
          }
        },
        {
          "type": "STRING",
          "value": "to"
        },
        {
          "type": "FIELD",
          "name": "room_id",
          "content": {
            "type": "SYMBOL",
            "name": "_room_ref"
          }
        },
        {
          "type": "FIELD",
          "name": "msg",
          "content": {
            "type": "ALIAS",
            "content": {
              "type": "SYMBOL",
              "name": "string"
            },
            "named": true,
            "value": "player_message"
          }
        }
      ]
    },
    "action_set_container_state": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "set"
        },
        {
          "type": "STRING",
          "value": "container"
        },
        {
          "type": "STRING",
          "value": "state"
        },
        {
          "type": "FIELD",
          "name": "item_id",
          "content": {
            "type": "SYMBOL",
            "name": "_item_ref"
          }
        },
        {
          "type": "SYMBOL",
          "name": "container_state"
        }
      ]
    },
    "action_spinner_msg": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "spinner"
        },
        {
          "type": "STRING",
          "value": "message"
        },
        {
          "type": "FIELD",
          "name": "spinner",
          "content": {
            "type": "SYMBOL",
            "name": "_spinner_ref"
          }
        }
      ]
    },
    "schedule_note": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "note"
        },
        {
          "type": "FIELD",
          "name": "text",
          "content": {
            "type": "ALIAS",
            "content": {
              "type": "SYMBOL",
              "name": "string"
            },
            "named": true,
            "value": "schedule_note_text"
          }
        }
      ]
    },
    "retry_type": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "onFalse"
        },
        {
          "type": "FIELD",
          "name": "policy",
          "content": {
            "type": "ALIAS",
            "content": {
              "type": "CHOICE",
              "members": [
                {
                  "type": "STRING",
                  "value": "cancel"
                },
                {
                  "type": "STRING",
                  "value": "retryNextTurn"
                },
                {
                  "type": "SEQ",
                  "members": [
                    {
                      "type": "STRING",
                      "value": "retryAfter"
                    },
                    {
                      "type": "SYMBOL",
                      "name": "number"
                    }
                  ]
                }
              ]
            },
            "named": true,
            "value": "retry_policy"
          }
        }
      ]
    },
    "action_schedule_in_or_on": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "schedule"
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "STRING",
              "value": "in"
            },
            {
              "type": "STRING",
              "value": "on"
            }
          ]
        },
        {
          "type": "FIELD",
          "name": "turns",
          "content": {
            "type": "SYMBOL",
            "name": "number"
          }
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "SYMBOL",
              "name": "schedule_note"
            },
            {
              "type": "BLANK"
            }
          ]
        },
        {
          "type": "SYMBOL",
          "name": "trigger_block"
        }
      ]
    },
    "action_schedule_in_if": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "schedule"
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "STRING",
              "value": "in"
            },
            {
              "type": "STRING",
              "value": "on"
            }
          ]
        },
        {
          "type": "FIELD",
          "name": "turns",
          "content": {
            "type": "SYMBOL",
            "name": "number"
          }
        },
        {
          "type": "STRING",
          "value": "if"
        },
        {
          "type": "SYMBOL",
          "name": "trigger_cond"
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "SYMBOL",
              "name": "retry_type"
            },
            {
              "type": "BLANK"
            }
          ]
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "SYMBOL",
              "name": "schedule_note"
            },
            {
              "type": "BLANK"
            }
          ]
        },
        {
          "type": "SYMBOL",
          "name": "trigger_block"
        }
      ]
    },
    "spinner_def": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "spinner"
        },
        {
          "type": "FIELD",
          "name": "name",
          "content": {
            "type": "SYMBOL",
            "name": "spinner_id"
          }
        },
        {
          "type": "SYMBOL",
          "name": "spinner_block"
        }
      ]
    },
    "spinner_block": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "{"
        },
        {
          "type": "REPEAT1",
          "content": {
            "type": "SYMBOL",
            "name": "spinner_stmt"
          }
        },
        {
          "type": "STRING",
          "value": "}"
        }
      ]
    },
    "spinner_stmt": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "wedge"
        },
        {
          "type": "FIELD",
          "name": "spinner_text",
          "content": {
            "type": "ALIAS",
            "content": {
              "type": "SYMBOL",
              "name": "string"
            },
            "named": true,
            "value": "spinner_text"
          }
        },
        {
          "type": "CHOICE",
          "members": [
            {
              "type": "SEQ",
              "members": [
                {
                  "type": "STRING",
                  "value": "width"
                },
                {
                  "type": "FIELD",
                  "name": "width",
                  "content": {
                    "type": "SYMBOL",
                    "name": "number"
                  }
                }
              ]
            },
            {
              "type": "BLANK"
            }
          ]
        }
      ]
    },
    "goal_def": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "goal"
        },
        {
          "type": "FIELD",
          "name": "goal_id",
          "content": {
            "type": "SYMBOL",
            "name": "goal_id"
          }
        },
        {
          "type": "SYMBOL",
          "name": "goal_block"
        }
      ]
    },
    "goal_block": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "{"
        },
        {
          "type": "REPEAT1",
          "content": {
            "type": "SYMBOL",
            "name": "_goal_stmt"
          }
        },
        {
          "type": "STRING",
          "value": "}"
        }
      ]
    },
    "_goal_stmt": {
      "type": "CHOICE",
      "members": [
        {
          "type": "SYMBOL",
          "name": "goal_name_stmt"
        },
        {
          "type": "SYMBOL",
          "name": "goal_desc_stmt"
        },
        {
          "type": "SYMBOL",
          "name": "goal_group_stmt"
        },
        {
          "type": "SYMBOL",
          "name": "goal_start_stmt"
        },
        {
          "type": "SYMBOL",
          "name": "goal_done_stmt"
        },
        {
          "type": "SYMBOL",
          "name": "goal_fail_stmt"
        }
      ]
    },
    "goal_name_stmt": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "name"
        },
        {
          "type": "FIELD",
          "name": "goal_name",
          "content": {
            "type": "ALIAS",
            "content": {
              "type": "SYMBOL",
              "name": "string"
            },
            "named": true,
            "value": "entity_name"
          }
        }
      ]
    },
    "goal_desc_stmt": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "desc"
        },
        {
          "type": "FIELD",
          "name": "goal_description",
          "content": {
            "type": "ALIAS",
            "content": {
              "type": "SYMBOL",
              "name": "string"
            },
            "named": true,
            "value": "entity_desc"
          }
        }
      ]
    },
    "goal_group_stmt": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "group"
        },
        {
          "type": "FIELD",
          "name": "goal_group",
          "content": {
            "type": "ALIAS",
            "content": {
              "type": "CHOICE",
              "members": [
                {
                  "type": "STRING",
                  "value": "required"
                },
                {
                  "type": "STRING",
                  "value": "optional"
                },
                {
                  "type": "STRING",
                  "value": "status-effect"
                }
              ]
            },
            "named": true,
            "value": "goal_group"
          }
        }
      ]
    },
    "goal_start_stmt": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "start"
        },
        {
          "type": "STRING",
          "value": "when"
        },
        {
          "type": "FIELD",
          "name": "start_condition",
          "content": {
            "type": "SYMBOL",
            "name": "_goal_cond"
          }
        }
      ]
    },
    "goal_done_stmt": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "done"
        },
        {
          "type": "STRING",
          "value": "when"
        },
        {
          "type": "FIELD",
          "name": "done_condition",
          "content": {
            "type": "SYMBOL",
            "name": "_goal_cond"
          }
        }
      ]
    },
    "goal_fail_stmt": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "fail"
        },
        {
          "type": "STRING",
          "value": "when"
        },
        {
          "type": "FIELD",
          "name": "fail_condition",
          "content": {
            "type": "SYMBOL",
            "name": "_goal_cond"
          }
        }
      ]
    },
    "_goal_cond": {
      "type": "CHOICE",
      "members": [
        {
          "type": "SYMBOL",
          "name": "gc_has_flag"
        },
        {
          "type": "SYMBOL",
          "name": "gc_missing_flag"
        },
        {
          "type": "SYMBOL",
          "name": "gc_has_item"
        },
        {
          "type": "SYMBOL",
          "name": "gc_reached_room"
        },
        {
          "type": "SYMBOL",
          "name": "gc_goal_complete"
        },
        {
          "type": "SYMBOL",
          "name": "gc_flag_progress"
        },
        {
          "type": "SYMBOL",
          "name": "gc_flag_complete"
        }
      ]
    },
    "gc_has_flag": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "has"
        },
        {
          "type": "STRING",
          "value": "flag"
        },
        {
          "type": "FIELD",
          "name": "flag_name",
          "content": {
            "type": "SYMBOL",
            "name": "_flag_ref"
          }
        }
      ]
    },
    "gc_missing_flag": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "missing"
        },
        {
          "type": "STRING",
          "value": "flag"
        },
        {
          "type": "FIELD",
          "name": "flag_name",
          "content": {
            "type": "SYMBOL",
            "name": "_flag_ref"
          }
        }
      ]
    },
    "gc_has_item": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "has"
        },
        {
          "type": "STRING",
          "value": "item"
        },
        {
          "type": "FIELD",
          "name": "item_id",
          "content": {
            "type": "SYMBOL",
            "name": "_item_ref"
          }
        }
      ]
    },
    "gc_reached_room": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "reached"
        },
        {
          "type": "STRING",
          "value": "room"
        },
        {
          "type": "FIELD",
          "name": "room_id",
          "content": {
            "type": "SYMBOL",
            "name": "_room_ref"
          }
        }
      ]
    },
    "gc_goal_complete": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "goal"
        },
        {
          "type": "STRING",
          "value": "complete"
        },
        {
          "type": "FIELD",
          "name": "goal_id",
          "content": {
            "type": "SYMBOL",
            "name": "_goal_ref"
          }
        }
      ]
    },
    "gc_flag_progress": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "flag"
        },
        {
          "type": "STRING",
          "value": "in"
        },
        {
          "type": "STRING",
          "value": "progress"
        },
        {
          "type": "FIELD",
          "name": "flag_name",
          "content": {
            "type": "SYMBOL",
            "name": "_flag_ref"
          }
        }
      ]
    },
    "gc_flag_complete": {
      "type": "SEQ",
      "members": [
        {
          "type": "STRING",
          "value": "flag"
        },
        {
          "type": "STRING",
          "value": "complete"
        },
        {
          "type": "FIELD",
          "name": "flag_name",
          "content": {
            "type": "SYMBOL",
            "name": "_flag_ref"
          }
        }
      ]
    }
  },
  "extras": [
    {
      "type": "SYMBOL",
      "name": "comment"
    },
    {
      "type": "PATTERN",
      "value": "[\\s\\r\\n\\t]"
    }
  ],
  "conflicts": [],
  "precedences": [],
  "externals": [],
  "inline": [],
  "supertypes": [
    "_room_ref",
    "_item_ref",
    "_npc_ref",
    "_flag_ref",
    "_goal_ref",
    "_spinner_ref",
    "_set_ref",
    "_room_stmt",
    "_item_stmt",
    "_npc_stmt",
    "_goal_stmt",
    "_trigger_stmt",
    "_when_event",
    "_trigger_cond_atom",
    "_action_type",
    "_goal_cond"
  ],
  "reserved": {}
}